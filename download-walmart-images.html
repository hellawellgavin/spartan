<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Walmart Product Image Downloader</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        h1 {
            color: #0071ce;
        }
        .instructions {
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .instructions ol {
            line-height: 1.8;
        }
        .instructions code {
            background: #f0f0f0;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }
        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .product-card {
            background: white;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .product-card h3 {
            font-size: 14px;
            margin: 10px 0;
            height: 40px;
            overflow: hidden;
        }
        .product-link {
            display: inline-block;
            background: #0071ce;
            color: white;
            padding: 8px 16px;
            text-decoration: none;
            border-radius: 4px;
            margin: 5px 0;
        }
        .product-link:hover {
            background: #004f9a;
        }
        .download-btn {
            background: #76b900;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
        }
        .download-btn:hover {
            background: #5a8f00;
        }
        .download-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
        }
        .status.info {
            background: #e3f2fd;
            color: #1976d2;
        }
        .status.success {
            background: #e8f5e9;
            color: #388e3c;
        }
        .status.error {
            background: #ffebee;
            color: #d32f2f;
        }
        .image-preview {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 4px;
            background: #f0f0f0;
        }
        .manual-download {
            background: #fff3cd;
            border: 1px solid #ffc107;
            padding: 15px;
            border-radius: 4px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>ðŸ›’ Walmart Product Image Downloader</h1>
    
    <div class="instructions">
        <h2>Instructions</h2>
        <p>This tool will help you download product images from Walmart. Follow these steps:</p>
        <ol>
            <li><strong>Open each product link below</strong> in a new tab</li>
            <li><strong>Right-click on the main product image</strong> and select "Save image as..."</li>
            <li><strong>Save the image</strong> as <code>shirt-1.jpg</code>, <code>shirt-2.jpg</code>, etc. to:<br>
                <code>/home/gavin/spartan/src/public/assets/products/shirts/</code></li>
            <li>Alternatively, right-click and select "Copy image address", then use the "Paste & Download" buttons below</li>
        </ol>
        
        <div class="manual-download">
            <strong>ðŸ’¡ Quick Download Method:</strong> For each product below, click "Open Product Page", 
            then right-click the main image â†’ "Copy image address" â†’ come back here and click "Paste & Download"
        </div>
    </div>

    <div id="products" class="product-grid"></div>

    <script>
        const products = [
            {
                id: 1,
                name: "Nirvana Men's Smiley Striped Graphic Tee",
                url: "https://www.walmart.com/ip/Nirvana-Striped-Men-s-Big-Men-s-Graphic-Tee-Shirt-Sizes-S-3XL/15563221134",
                price: "$16.98"
            },
            {
                id: 2,
                name: "South Park Cartman Graphic Tee",
                url: "https://www.walmart.com/ip/South-Park-Mens-Big-Men-s-Graphic-Tee-Shirt-Cartman-Sizes-S-3XL/9370572438",
                price: "$19.99"
            },
            {
                id: 3,
                name: "SpongeBob SquarePants Character Group Graphic Tee",
                url: "https://www.walmart.com/ip/SpongeBob-SquarePants-Character-Group-Shot-Men-s-Big-Men-s-Graphic-Tee-Sizes-S-3XL/599159676",
                price: "$12.98"
            },
            {
                id: 4,
                name: "Netflix Stranger Things Logo Graphic Tee",
                url: "https://www.walmart.com/ip/Stranger-Things-Men-s-Big-Men-s-Graphic-Tee-Sizes-S-3XL/16336561774",
                price: "$12.98"
            },
            {
                id: 5,
                name: "Men's Nintendo 8-Bit Icons Graphic T-Shirt",
                url: "https://www.walmart.com/ip/Men-s-Nintendo-8-Bit-Icons-Graphic-T-Shirt/13574752283",
                price: "$12.99"
            },
            {
                id: 6,
                name: "Rick & Morty Embroidered Graphic Tee",
                url: "https://www.walmart.com/ip/Rick-Morty-Men-s-Big-Men-s-Embroidered-Graphic-Tee-Shirt-Sizes-S-3XL/2599230000",
                price: "$12.98"
            },
            {
                id: 7,
                name: "Star Wars Most Impressive Graphic Tee",
                url: "https://www.walmart.com/ip/Men-s-Star-Wars-Most-Impressive-Graphic-Tee-Black-Medium/190607266",
                price: "$12.99"
            },
            {
                id: 8,
                name: "Superman Shield Logo Graphic Tee",
                url: "https://www.walmart.com/ip/Superman-Men-s-and-Big-Men-s-Graphic-Tee-with-Short-Sleeves-Sizes-S-3XL/14114760123",
                price: "$9.98"
            }
        ];

        function downloadImage(imageUrl, filename) {
            fetch(imageUrl, { mode: 'cors' })
                .then(response => response.blob())
                .then(blob => {
                    const url = window.URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.style.display = 'none';
                    a.href = url;
                    a.download = filename;
                    document.body.appendChild(a);
                    a.click();
                    window.URL.revokeObjectURL(url);
                    document.body.removeChild(a);
                    return true;
                })
                .catch(error => {
                    alert(`Failed to download ${filename}. Error: ${error.message}\n\nPlease manually save the image instead.`);
                    return false;
                });
        }

        async function pasteAndDownload(productId) {
            try {
                const clipboardText = await navigator.clipboard.readText();
                
                if (!clipboardText.includes('walmartimages.com')) {
                    alert('The clipboard doesn\'t contain a Walmart image URL. Please copy the image address first.');
                    return;
                }
                
                const filename = `shirt-${productId}.jpg`;
                
                // Show preview
                const card = document.querySelector(`[data-id="${productId}"]`);
                const img = card.querySelector('.image-preview');
                img.src = clipboardText;
                img.style.display = 'block';
                
                // Attempt download
                downloadImage(clipboardText, filename);
                
            } catch (err) {
                alert('Failed to read clipboard. Please make sure you copied an image URL first, or save the image manually.');
                console.error('Clipboard error:', err);
            }
        }

        function renderProducts() {
            const container = document.getElementById('products');
            
            products.forEach(product => {
                const card = document.createElement('div');
                card.className = 'product-card';
                card.setAttribute('data-id', product.id);
                
                card.innerHTML = `
                    <img class="image-preview" style="display:none;" alt="Product preview">
                    <h3>${product.id}. ${product.name}</h3>
                    <p><strong>Price:</strong> ${product.price}</p>
                    <a href="${product.url}" target="_blank" class="product-link">Open Product Page â†’</a>
                    <br>
                    <button class="download-btn" onclick="pasteAndDownload(${product.id})">
                        ðŸ“‹ Paste & Download as shirt-${product.id}.jpg
                    </button>
                `;
                
                container.appendChild(card);
            });
        }

        // Initialize
        renderProducts();
    </script>
</body>
</html>
